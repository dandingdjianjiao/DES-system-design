# ReasoningBank Configuration for DES Formulation Agent

# API Keys Configuration:
# - DashScope: Set DASHSCOPE_API_KEY in .env file
# - OpenAI: Set OPENAI_API_KEY in .env file
# API clients automatically load keys from environment variables

# LLM Configuration
llm:
  provider: "dashscope"  # "dashscope" (Aliyun) or "openai" or "custom"
  model: "qwen-plus"  # DashScope: qwen-plus, qwen-turbo, qwen-max | OpenAI: gpt-4o-mini, gpt-4o
  temperature: 0.7  # For agent reasoning
  max_tokens: 2000
  api_base: null  # Auto-set by provider. Custom: "https://your-endpoint.com/v1"

# Agent LLM (may use different model for main reasoning)
agent_llm:
  provider: "dashscope"
  model: "qwen-plus"  # Higher capability for formulation design
  temperature: 0.7
  max_tokens: 3000

# Embedding Configuration
embedding:
  provider: "dashscope"  # "dashscope" (Aliyun) or "openai"
  model: "text-embedding-v3"  # DashScope: text-embedding-v3 | OpenAI: text-embedding-3-small
  dimension: null  # Auto-detected. OpenAI supports custom dimensions (e.g., 512, 1536)

# Memory Bank Configuration
memory:
  max_items: 1000
  retrieval_top_k: 3  # Number of memories to retrieve per query
  extraction_max_per_trajectory: 3  # Max memories from single trajectory
  min_similarity: 0.0  # Minimum similarity threshold (0-1)
  persist_path: "data/memory/des_reasoningbank.json"
  auto_save: true  # Auto-save after each consolidation

# Judge Configuration
judge:
  temperature: 0.0  # Deterministic for consistency
  use_judge: true  # Whether to use LLM judge (set false for oracle evaluation)

# Extractor Configuration
extractor:
  temperature: 1.0  # Higher temperature for diverse memory generation
  use_parallel_extraction: false  # Enable MaTTS parallel extraction

# Tool Integration
tools:
  corerag:
    enabled: true
    max_results: 5
    timeout: 30  # seconds

  largerag:
    enabled: true  # Set to false if not ready
    max_results: 10
    timeout: 30

  experimental_data:
    enabled: false  # Not implemented yet

# MaTTS (Memory-Aware Test-Time Scaling)
matts:
  enabled: false  # Enable after Phase 4
  parallel_k: 3  # Number of parallel trajectories
  sequential_steps: 2  # Number of refinement steps
  use_self_contrast: true  # Use self-contrast for parallel extraction

# Logging
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  log_file: "logs/reasoningbank.log"
  console: true

# Agent Behavior
agent:
  max_steps: 10  # Maximum steps per task
  enable_memory_injection: true  # Inject retrieved memories into prompt
  explain_memory_usage: true  # Agent should explain why it uses each memory
